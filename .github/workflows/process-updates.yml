name: Process updates from realm/realm-swift repository

on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * *' # This schedule is set to run every day at midnight. Modify as necessary.

jobs:
  check_for_updates:
    name: "Call the update-package workflow"
    uses: ./.github/workflows/check-for-update.yml
    with:
      source-repo: 'realm/realm-swift'
  process_latest_release:
    name: "Process the latest release"
    needs: check_for_updates
    if: ${{ needs.check_for_updates.outputs.needs-update }}
    uses: ./.github/workflows/update-package.yml

